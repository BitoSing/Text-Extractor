<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Text Extractor & Transcriber</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Import Inter for English, Noto Sans Khmer for Khmer */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+Khmer:wght@400;700&display=swap');
        .font-inter { font-family: 'Inter', sans-serif; }
        .font-khmer { font-family: 'Noto Sans Khmer', 'Leelawadee UI', 'Khmer OS', 'Khmer UI', 'Inter', sans-serif; }
        .tab-active { border-color: #4f46e5; color: #4f46e5; background-color: #eef2ff; }
        .tab-inactive { border-color: transparent; color: #6b7280; }
        /* Language dropdown styles */
        .language-selector {
            position: relative;
            display: inline-block;
        }
        .language-btn {
            background-color: #f3f4f6;
            color: #4b5563;
            border: 1.5px solid #e5e7eb;
            border-radius: 24px;
            padding: 8px 18px 8px 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.2s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
        }
        .language-btn:hover, .language-btn:focus {
            background-color: #e0e7ff;
            color: #3730a3;
            outline: none;
        }
        .language-btn .arrow {
            margin-left: 6px;
            transition: transform 0.2s;
        }
        .language-selector.open .language-btn .arrow {
            transform: rotate(180deg);
        }
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #fff;
            min-width: 170px;
            border-radius: 14px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.13);
            z-index: 10;
            margin-top: 8px;
            overflow: hidden;
            animation: fadeIn 0.18s ease;
        }
        .language-selector.open .dropdown-content {
            display: block;
        }
        .language-option {
            color: #374151;
            padding: 12px 18px 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: background 0.18s;
        }
        .language-option:hover, .language-option.active-language {
            background-color: #f1f5f9;
        }
        .language-flag {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 1px 4px rgba(0,0,0,0.07);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px);}
            to { opacity: 1; transform: translateY(0);}
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React and Babel Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- PDF.js library for PDF previews -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;
    </script>

    <script type="text/babel">
        const App = () => {
            // State for app mode
            const [mode, setMode] = React.useState('file'); // 'file' or 'audio'

            // State for file handling
            const [selectedFile, setSelectedFile] = React.useState(null);
            const [filePreview, setFilePreview] = React.useState(null);
            const [fileType, setFileType] = React.useState('');

            // State for audio handling
            const [isRecording, setIsRecording] = React.useState(false);
            const [audioFile, setAudioFile] = React.useState(null); // Blob or File
            const [audioPreviewUrl, setAudioPreviewUrl] = React.useState('');
            const [recordSeconds, setRecordSeconds] = React.useState(0); // NEW: recording timer
            const mediaRecorderRef = React.useRef(null);
            const audioChunksRef = React.useRef([]);
            const recordIntervalRef = React.useRef(null);

            // Shared state
            const [extractedText, setExtractedText] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            const [error, setError] = React.useState('');
            
            // Refs
            const fileInputRef = React.useRef(null);
            const pdfCanvasRef = React.useRef(null);
            const audioInputRef = React.useRef(null);

            // --- Generic Helper Functions ---
            const toBase64 = (file) => new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = (error) => reject(error);
            });

            const clearState = (clearMode = true) => {
                setSelectedFile(null);
                setFilePreview(null);
                setFileType('');
                if (fileInputRef.current) fileInputRef.current.value = '';
                
                setIsRecording(false);
                setAudioFile(null);
                setAudioPreviewUrl('');
                if (audioInputRef.current) audioInputRef.current.value = '';

                setExtractedText('');
                setError('');
                if (clearMode) setIsLoading(false);
            };

            const switchMode = (newMode) => {
                clearState();
                setMode(newMode);
            };

            // --- File Handling Logic ---
            const processFile = async (file) => {
                if (!file) return;
                clearState(false); // Keep loading state if active

                // NEW: File size validation
                if (file.type.startsWith('image/') && file.size > 4 * 1024 * 1024) {
                    return setError('Image file must be under 4MB.');
                }
                if (file.type === 'application/pdf' && file.size > 10 * 1024 * 1024) {
                    return setError('PDF file must be under 10MB.');
                }

                if (file.type.startsWith('image/')) {
                    setFileType('image');
                    setSelectedFile(file);
                    setFilePreview(URL.createObjectURL(file));
                } else if (file.type === 'application/pdf') {
                    setFileType('pdf');
                    setSelectedFile(file);
                    renderPdfPreview(file);
                } else {
                    setError('Please select a valid image or PDF file.');
                }
            };
            const renderPdfPreview = async (file) => {
                try {
                    const uri = URL.createObjectURL(file);
                    const pdf = await pdfjsLib.getDocument(uri).promise;
                    const page = await pdf.getPage(1);
                    const canvas = pdfCanvasRef.current;
                    const viewport = page.getViewport({ scale: canvas.parentElement.offsetWidth / page.getViewport({scale: 1}).width });
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;
                    await page.render({ canvasContext: canvas.getContext('2d'), viewport }).promise;
                    URL.revokeObjectURL(uri);
                } catch (e) { setError("Could not render a preview for this PDF."); }
            };
             const handlePaste = (event) => {
                const file = Array.from(event.clipboardData.items).find(item => item.type.startsWith('image/'))?.getAsFile();
                if(file) {
                    switchMode('file');
                    processFile(file);
                    event.preventDefault();
                }
            };
            React.useEffect(() => {
                document.addEventListener('paste', handlePaste);
                return () => document.removeEventListener('paste', handlePaste);
            }, []);

            // --- Audio Handling Logic ---
            const handleStartRecording = async () => {
                clearState(false);
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorderRef.current = new MediaRecorder(stream, { mimeType: 'audio/webm' });
                    audioChunksRef.current = [];
                    mediaRecorderRef.current.ondataavailable = e => audioChunksRef.current.push(e.data);
                    mediaRecorderRef.current.onstop = () => {
                        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });
                        // NEW: Size check for recorded audio
                        if (audioBlob.size > 10 * 1024 * 1024) {
                            setError('Recording is too large (max 10MB). Please record a shorter clip.');
                            setAudioFile(null);
                        } else {
                            setAudioFile(audioBlob);
                            setAudioPreviewUrl(URL.createObjectURL(audioBlob));
                        }
                        stream.getTracks().forEach(track => track.stop());
                        clearInterval(recordIntervalRef.current); // Stop timer
                        setRecordSeconds(0);
                    };
                    mediaRecorderRef.current.start();
                    setIsRecording(true);
                    setRecordSeconds(0);
                    recordIntervalRef.current = setInterval(() => {
                        setRecordSeconds(prev => prev + 1);
                    }, 1000);
                } catch (err) { setError("Microphone access denied. Please enable it in your browser settings."); }
            };
            const handleStopRecording = () => {
                mediaRecorderRef.current?.stop();
                setIsRecording(false);
                clearInterval(recordIntervalRef.current); // Stop timer
            };
            const handleAudioUpload = (event) => {
                const file = event.target.files[0];
                clearState(false);
                if (!file) return;
                // NEW: Size check for uploaded audio
                if (file.size > 10 * 1024 * 1024) {
                    return setError('Audio file must be under 10MB.');
                }
                if (file.type.startsWith('audio/')) {
                    setAudioFile(file);
                    setAudioPreviewUrl(URL.createObjectURL(file));
                } else {
                    setError('Please select a valid audio file.');
                }
            };
            
            // --- API Call Logic ---
            const processApiRequest = async (prompt, file) => {
                if (!file) {
                    setError('No file or recording available to process.');
                    return;
                }
                setIsLoading(true);
                setExtractedText('');
                setError('');

                // ===================================================================
                //
                //   ▼ ▼ ▼ PASTE YOUR **NEW, SECRET** API KEY ON THE LINE BELOW ▼ ▼ ▼
                //
                const apiKey = "AIzaSyDydw9gsfTJX7nRse3A1wLNsHLV36_HfTU";
                //
                //   ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲
                //
                // ===================================================================

                if (apiKey.includes("PASTE_YOUR")) {
                    setError("API key is missing. Please edit the code to add your new Google Gemini API key.");
                    setIsLoading(false);
                    return;
                }

                try {
                    const base64Data = await toBase64(file);
                    // --- Khmer transcription improvement ---
                    let customPrompt = prompt;
                    if (file.type.startsWith('audio/')) {
                        customPrompt = `
Transcribe all spoken content from this audio file. 
If the language is Khmer, transcribe it accurately in Khmer Unicode script, preserving all original words and meaning. 
Do not translate to English or any other language. 
If the language is not Khmer, transcribe in the detected language. 
Return only the transcribed text, no explanation.
                        `.trim();
                    }
                    const payload = { contents: [{ parts: [{ text: customPrompt }, { inline_data: { mime_type: file.type, data: base64Data } }] }] };
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });

                    if (!response.ok) {
                        const errorBody = await response.json();
                        throw new Error(`API request failed: ${errorBody.error.message}`);
                    }
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates[0].content) {
                        setExtractedText(result.candidates[0].content.parts[0].text);
                    } else if (result.promptFeedback?.blockReason) {
                        setError(`Request blocked. Reason: ${result.promptFeedback.blockReason}.`);
                    } else {
                        setError('No text could be extracted/transcribed.');
                    }
                } catch (err) { setError(`An error occurred: ${err.message}. Check console.`); } finally { setIsLoading(false); }
            };

            // Language support
            const languages = [
                { code: 'en', label: 'English', flag: 'https://flagcdn.com/us.svg', fontClass: 'font-inter' },
                { code: 'km', label: 'ភាសាខ្មែរ', flag: 'https://flagcdn.com/kh.svg', fontClass: 'font-khmer' }
            ];
            const [lang, setLang] = React.useState('en');
            const [langDropdown, setLangDropdown] = React.useState(false);

            // Simple translations
            const t = (key) => {
                const dict = {
                    'title': {
                        en: 'AI Text Extractor & Transcriber',
                        km: 'កម្មវិធីស្រង់អត្ថបទ និងបម្លែងសំឡេងជាអត្ថបទដោយ AI'
                    },
                    'file_tab': {
                        en: 'File Extractor',
                        km: 'ស្រង់អត្ថបទពីឯកសារ'
                    },
                    'audio_tab': {
                        en: 'Audio Transcriber',
                        km: 'បម្លែងសំឡេងជាអត្ថបទ'
                    },
                    'upload_hint': {
                        en: 'Click to Upload or Paste an Image/PDF',
                        km: 'ចុចដើម្បីផ្ទុកឬបិទភ្ជាប់រូបភាព/PDF'
                    },
                    'pdf_img_limit': {
                        en: 'PDF (max 10MB), Image (max 4MB)',
                        km: 'PDF (អតិបរមា 10MB), រូបភាព (អតិបរមា 4MB)'
                    },
                    'file_selected': {
                        en: 'File selected. Click to change.',
                        km: 'បានជ្រើសឯកសារ។ ចុចដើម្បីផ្លាស់ប្តូរ។'
                    },
                    'extract_btn': {
                        en: 'Extract Text from File',
                        km: 'ស្រង់អត្ថបទពីឯកសារ'
                    },
                    'extracting': {
                        en: 'Extracting...',
                        km: 'កំពុងស្រង់...'
                    },
                    'recording': {
                        en: 'Recording...',
                        km: 'កំពុងថតសំឡេង...'
                    },
                    'audio_ready': {
                        en: 'Audio Ready',
                        km: 'សំឡេងរួចរាល់'
                    },
                    'record_upload_audio': {
                        en: 'Record or Upload Audio',
                        km: 'ថតឬផ្ទុកសំឡេង'
                    },
                    'record': {
                        en: 'Record',
                        km: 'ថតសំឡេង'
                    },
                    'stop': {
                        en: 'Stop',
                        km: 'បញ្ឈប់'
                    },
                    'upload_audio': {
                        en: 'Upload Audio File (max 10MB)',
                        km: 'ផ្ទុកឯកសារសំឡេង (អតិបរមា 10MB)'
                    },
                    'transcribe_btn': {
                        en: 'Transcribe Audio',
                        km: 'បម្លែងសំឡេងជាអត្ថបទ'
                    },
                    'transcribing': {
                        en: 'Transcribing...',
                        km: 'កំពុងបម្លែង...'
                    },
                    'results': {
                        en: 'Results',
                        km: 'លទ្ធផល'
                    },
                    'error': {
                        en: 'Error:',
                        km: 'បញ្ហា៖'
                    }
                };
                return dict[key]?.[lang] || dict[key]?.en || key;
            };

            // Helper to get font class for current language
            const getFontClass = () => lang === 'km' ? 'font-khmer' : 'font-inter';

            return (
                <div className={`min-h-screen bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center p-4 ${getFontClass()}`}>
                    <div className="bg-white rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-2xl">
                        {/* Language selector UX */}
                        <div className="flex justify-end mb-4">
                            <div
                                className={`language-selector${langDropdown ? ' open' : ''}`}
                                tabIndex={0}
                                onBlur={() => setTimeout(() => setLangDropdown(false), 120)}
                            >
                                <button
                                    className="language-btn"
                                    onClick={() => setLangDropdown(v => !v)}
                                    aria-label="Select language"
                                    type="button"
                                >
                                    <img src={languages.find(l => l.code === lang).flag} className="language-flag" alt={languages.find(l => l.code === lang).label} />
                                    <span className={languages.find(l => l.code === lang).fontClass}>{languages.find(l => l.code === lang).label}</span>
                                    <svg className="arrow" width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M6 9L12 15L18 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg>
                                </button>
                                <div className="dropdown-content">
                                    {languages.map(l => (
                                        <button
                                            key={l.code}
                                            className={`language-option${lang === l.code ? ' active-language' : ''} ${l.fontClass}`}
                                            onClick={() => { setLang(l.code); setLangDropdown(false); }}
                                            type="button"
                                        >
                                            <img src={l.flag} className="language-flag" alt={l.label} />
                                            {l.label}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                        <h1 className={`text-3xl md:text-4xl font-extrabold text-center text-gray-800 mb-4 ${getFontClass()}`}>{t('title')}</h1>
                        <div className="flex justify-center mb-6 border-b border-gray-200">
                            <button onClick={() => switchMode('file')} className={`px-6 py-3 font-medium text-lg border-b-2 transition-colors duration-200 ${mode === 'file' ? 'tab-active' : 'tab-inactive'} ${getFontClass()}`}>{t('file_tab')}</button>
                            <button onClick={() => switchMode('audio')} className={`px-6 py-3 font-medium text-lg border-b-2 transition-colors duration-200 ${mode === 'audio' ? 'tab-active' : 'tab-inactive'} ${getFontClass()}`}>{t('audio_tab')}</button>
                        </div>

                        {mode === 'file' && (
                            <div>
                                <div className="mb-6 border-2 border-dashed border-indigo-300 rounded-lg p-6 text-center transition-colors duration-200 hover:border-indigo-500 cursor-pointer" onClick={() => fileInputRef.current.click()}>
                                    <input type="file" accept="image/*,application/pdf" onChange={(e) => processFile(e.target.files[0])} className="hidden" ref={fileInputRef} />
                                    {!fileType ? (
                                        <div className="flex flex-col items-center justify-center h-32">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-indigo-400 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>
                                            <p className="font-medium">{t('upload_hint')}</p>
                                            <p className="text-sm text-gray-400">{t('pdf_img_limit')}</p>
                                        </div>
                                    ) : (
                                        <div className="flex flex-col items-center">
                                            {fileType === 'image' ? <img src={filePreview} className="max-h-64 object-contain rounded-md shadow-lg mb-4" /> : <canvas ref={pdfCanvasRef} className="max-h-64 object-contain rounded-md shadow-lg mb-4 border"></canvas>}
                                            <p className="text-sm">{t('file_selected')}</p>
                                        </div>
                                    )}
                                </div>
                                <button onClick={() => processApiRequest("Extract all text from this file. Present the text clearly and accurately.", selectedFile)} disabled={!selectedFile || isLoading} className="w-full px-6 py-3 rounded-lg font-semibold text-white transition-all bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed flex items-center justify-center">
                                    {isLoading ? <svg className="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> : <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z" /><path fillRule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clipRule="evenodd" /></svg>}
                                    {isLoading ? t('extracting') : t('extract_btn')}
                                </button>
                            </div>
                        )}

                        {mode === 'audio' && (
                            <div>
                                <div className="mb-6 border-2 border-dashed border-indigo-300 rounded-lg p-6 text-center">
                                    <div className="flex flex-col items-center justify-center min-h-[8rem]">
                                        <svg xmlns="http://www.w3.org/2000/svg" className={`h-12 w-12 mb-2 ${isRecording ? 'text-red-500 animate-pulse' : 'text-indigo-400'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>
                                        <p className="font-medium">
                                            {isRecording
                                                ? <>
                                                    {t('recording')}{' '}
                                                    <span className="ml-2 text-red-600 font-mono">
                                                        {String(Math.floor(recordSeconds / 60)).padStart(2, '0')}:
                                                        {String(recordSeconds % 60).padStart(2, '0')}
                                                    </span>
                                                  </>
                                                : (audioPreviewUrl ? t('audio_ready') : t('record_upload_audio'))}
                                        </p>
                                        {!isRecording && audioPreviewUrl && <audio src={audioPreviewUrl} controls className="mt-4 w-full max-w-xs"></audio>}
                                    </div>
                                    <div className="grid grid-cols-2 gap-4 mt-4">
                                        <button onClick={handleStartRecording} disabled={isRecording} className="px-4 py-2 rounded-lg font-semibold text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400">{t('record')}</button>
                                        <button onClick={handleStopRecording} disabled={!isRecording} className="px-4 py-2 rounded-lg font-semibold text-white bg-red-600 hover:bg-red-700 disabled:bg-gray-400">{t('stop')}</button>
                                        <input type="file" accept="audio/*" onChange={handleAudioUpload} className="hidden" ref={audioInputRef} />
                                        <button type="button" onClick={() => audioInputRef.current?.click()} disabled={isRecording} className="col-span-2 px-4 py-2 rounded-lg font-semibold text-white bg-indigo-500 hover:bg-indigo-600 disabled:bg-gray-400">{t('upload_audio')}</button>
                                    </div>
                                </div>
                                 <button onClick={() => processApiRequest("Transcribe the following audio. Identify the language if possible and provide the transcription.", audioFile)} disabled={!audioFile || isLoading} className="w-full px-6 py-3 rounded-lg font-semibold text-white transition-all bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed flex items-center justify-center">
                                    {isLoading ? <svg className="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> : <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19V6l11.59 11.59A2 2 0 0120 18.17V5a2 2 0 00-2-2H6a2 2 0 00-2 2v13.17a2 2 0 00.59 1.42L9 19z" /></svg>}
                                    {isLoading ? t('transcribing') : t('transcribe_btn')}
                                </button>
                            </div>
                        )}

                        <div className="mt-6">
                            {error && <div className={`bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg ${getFontClass()}`} role="alert"><strong className="font-bold">{t('error')} </strong><span>{error}</span></div>}
                            {extractedText && <div className={`bg-gray-50 p-6 rounded-lg shadow-inner border mt-4 ${getFontClass()}`}><h2 className={`text-xl font-bold text-gray-800 mb-3 flex items-center ${getFontClass()}`}><svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 mr-2 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>{t('results')}</h2><div className={`mt-4 text-gray-700 whitespace-pre-wrap leading-relaxed max-h-96 overflow-auto bg-white p-4 rounded-md border ${getFontClass()}`}>{extractedText}</div></div>}
                        </div>
                    </div>
                </div>
            );
        };
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>

/*
This UI is already highly responsive due to Tailwind CSS utility classes:
- The main container uses `p-4` for padding and `flex items-center justify-center` for centering.
- The card uses `w-full max-w-2xl` so it adapts to all screen sizes up to 2xl.
- The language selector, buttons, and form elements use flex/grid and responsive spacing.
- Text sizes use `text-3xl md:text-4xl` for scaling.
- The audio player and preview images use `max-w-xs`, `max-h-64`, etc. for scaling.
- All paddings, margins, and layouts use relative units.

You can further test on mobile, tablet, and desktop and it will adapt well.
If you want even more compact spacing on mobile, you can add more Tailwind responsive classes (e.g. `p-2 md:p-6`), but the current setup is already mobile-friendly and responsive.
*/
